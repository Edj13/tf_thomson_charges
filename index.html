<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <!-- 
      Hi you.

      Feel free to edit the html here, but minislides was
      designed to be run on the command line by compiling a .md file.

      Got an issue or something to say? 
      Contribute on Github: https://github.com/thoppe/miniprez
      
      Thanks, you.
      @metasemantic
    -->
  <!-- SEO -->
  <title>
   miniprez: Simple, beautiful web presentations
  </title>
  <meta content="&lt;Miniprez: Simple, beautiful web presentations" name="description"/>
  <!-- URL CANONICAL -->
  <!-- <link rel="canonical" href="http://your-url.com/"> -->
  <!-- KaTeX imports -->
  <link href="static/katex/katex.min.css" rel="stylesheet"/>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext" rel="stylesheet"/>
  <!-- CSS Base -->
  <link href="static/css/webslides_base.css" media="all" rel="stylesheet" type="text/css"/>
  <!-- CSS Colors -->
  <link href="static/css/webslides_colors.css" media="all" rel="stylesheet" type="text/css"/>
  <!-- JavaScript code prettifier from Google -->
  <script src="static/js/run_prettify.js">
  </script>
  <!-- Font-awesome CSS -->
  <link href="static/css/font-awesome.min.css " rel="stylesheet"/>
  <!-- miniprez style adjustments -->
  <link href="static/css/style_adjustments.css" rel="stylesheet"/>
  <!-- SOCIAL CARDS (ADD YOUR INFO) -->
  <!-- FACEBOOK -->
  <meta content="http://your-url.com/" property="og:url"/>
  <!-- YOUR URL -->
  <meta content="article" property="og:type"/>
  <meta content="WebSlides - Making HTML Presentations Easy" property="og:title"/>
  <!-- EDIT -->
  <meta content="WebSlides is about telling stories beautifully. Just the essential features. Good karma." property="og:description"/>
  <!-- EDIT -->
  <meta content="2017-01-04T17:20:50" property="og:updated_time"/>
  <!-- EDIT -->
  <meta content="static/images/share-webslides.jpg" property="og:image"/>
  <!-- EDIT -->
  <!-- TWITTER -->
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@metasemantic" name="twitter:site"/>
  <!-- EDIT -->
  <meta content="@metasemantic" name="twitter:creator"/>
  <!-- EDIT -->
  <meta content="minipres - ..." name="twitter:title"/>
  <!-- EDIT -->
  <meta content="..." name="twitter:description"/>
  <!-- EDIT -->
  <meta content="static/images/share-webslides.jpg" name="twitter:image"/>
  <!-- EDIT -->
  <!-- FAVICONS -->
  <link href="static/images/favicons/favicon.png" rel="shortcut icon" sizes="16x16"/>
  <link href="static/images/favicons/favicon-32.png" rel="shortcut icon" sizes="32x32"/>
  <link href="static/images/favicons/favicon-76.png" rel="apple-touch-icon icon" sizes="76x76"/>
  <link href="static/images/favicons/favicon-120.png" rel="apple-touch-icon icon" sizes="120x120"/>
  <link href="static/images/favicons/favicon-152.png" rel="apple-touch-icon icon" sizes="152x152"/>
  <link href="static/images/favicons/favicon-180.png" rel="apple-touch-icon icon" sizes="180x180"/>
  <link href="static/images/favicons/favicon-192.png" rel="apple-touch-icon icon" sizes="192x192"/>
  <!-- Android -->
  <meta content="yes" name="mobile-web-app-capable"/>
  <meta content="#333333" name="theme-color"/>
 </head>
 <body>
  <main role="main">
   <article id="minislides">
    <!-- Content will be auto filled here -->
<section class="aligncenter bg-black slide-top slide" id="slide-number-1">
 <span class="background light" style="background-image:url('https://source.unsplash.com/RdmLSJR-tq8')">
 </span>
 <div class="wrap">
  <h1>
   <text>
    Stupid TensorFlow Tricks
   </text>
  </h1>
  <h4>
   <text>
    A new take on an old (Thomson) problem
   </text>
  </h4>
 </div>
 <footer>
  <div class="wrap">
   <div class="span">
    <a class="button alignleft ghost" href="https://github.com/thoppe/tf_thomson_charges">
     <text>
      <i aria-hidden="true" class="fa fa-github">
      </i>
      Project repo
     </text>
    </a>
    <a class="button alignleft ghost" href="https://medium.com/towards-data-science/stupid-tensorflow-tricks-3a837194b7a0">
     <text>
      <i aria-hidden="true" class="fa fa-medium">
      </i>
      Medium post
     </text>
    </a>
    <a class="button ghost alignright" href="https://twitter.com/metasemantic">
     <text>
      <i aria-hidden="true" class="fa fa-twitter">
      </i>
      @metasemantic
     </text>
    </a>
   </div>
  </div>
 </footer>
</section><section class="bg-white slide-top slide" id="slide-number-2">
 <h1>
  <text>
   What is TensorFlow?
  </text>
 </h1>
 <h4 class="grid">
  <div class="column">
   <text>
    Open source software library for machine learning, released by Google. Synonymous with "deep-learning". Computation lives on a graph and analytic derivatives are possible.
   </text>
  </div>
  <div class="column">
   <figure>
    <img src="images/TensorFlowLogo.png" style=""/>
   </figure>
  </div>
  <div class="column">
   <figure>
    <img src="http://riosyvalles.com/wp/wp-content/uploads/2016/10/graph2.png" style=""/>
   </figure>
  </div>
 </h4>
</section><section class="bg-black slide-top slide" id="slide-number-3">
 <h1>
  <text>
   What is the Thomson problem?
  </text>
 </h1>
 <h2>
  <text>
   <div class="equation" data-expr="U = \sum_{i}^N \sum_{i&gt;j}^N \frac{1}{r_{ij}}">
   </div>
  </text>
 </h2>
 <h4 class="grid">
  <div class="column">
   <text>
    The objective of the
    <a href="https://en.wikipedia.org/wiki/Thomson_problem">
     Thomson problem
    </a>
    is to determine the minimum electrostatic potential energy configuration of N electrons constrained to the surface of a unit sphere that repel each other with a force given by Coulomb's law.
   </text>
  </div>
  <div class="column">
   <figure>
    <img src="images/N_2_to_5_ThomsonSolutions.png" style="height:400px"/>
   </figure>
  </div>
 </h4>
</section><section class="wrap slide" id="slide-number-4">
 <h2>
  <ul class="markdownlist">
   <li>
    <text>
     Can we use TensorFlow to
    </text>
   </li>
   <li>
    <text>
     solve the Thomson problem?
    </text>
   </li>
  </ul>
 </h2>
 <text>
  Spoiler alert: Yes!
 </text>
</section><section class="wrap slide" id="slide-number-5">
 <h3>
  <text>
   Build a model
  </text>
 </h3>
 <pre class="prettyprint">def thompson_model(N):
    tf.reset_default_graph()
    # Start with random coordinates from a normal dist
    r0 = np.random.normal(size=[N,3])
    coord = tf.Variable(r0, name='coordinates')
    # Normalize the coordinates onto the unit sphere
    coord = coord/tf.reshape(tf.norm(coord,axis=1),(-1,1))
    def squared_diff(A):
        r = tf.reduce_sum(A*A, 1)
        r = tf.reshape(r, [-1, 1])
        return r - 2*tf.matmul(A, tf.transpose(A)) + tf.transpose(r)
    RR = squared_diff(coord)
    # We don't need to compute the gradient over the symmetric distance
    # matrix, only the upper right half
    mask = np.triu(np.ones((N, N), dtype=np.bool_), 1)
    R = tf.sqrt(tf.boolean_mask(RR, mask))
    # Electrostatic potential up to a constant, 1/r
    U = tf.reduce_sum(1/R)
    return U, coord</pre>
</section><section class="wrap slide" id="slide-number-6">
 <h3>
  <text>
   Minimize the energy
  </text>
 </h3>
 <pre class="prettyprint">def minimize_thompson(N):
    U, coord = thompson_model(N)
    learning_rate = 0.1
    LR = tf.placeholder(tf.float64, shape=[])
    opt = tf.train.AdamOptimizer(learning_rate=LR).minimize(U)
    with tf.Session() as sess:
        init = tf.global_variables_initializer()
        sess.run(init)
        for n in xrange(50):
            for _ in range(100):
                sess.run(opt, feed_dict={LR:learning_rate})
            # Even ADAM gets stuck, slowly decay the learning rate
            learning_rate *= 0.96</pre>
</section><section class="wrap slide-top slide" id="slide-number-7">
 <h3>
  <text>
   Make pictures
  </text>
 </h3>
 <div class="grid">
  <div class="column">
   <figure>
    <img src="images/charges2.gif" style=""/>
    <figcaption>
     <html>
      <body>
       <p>
        100 charges
       </p>
      </body>
     </html>
    </figcaption>
   </figure>
  </div>
  <div class="column">
   <figure>
    <img src="images/charges1.gif" style=""/>
    <figcaption>
     <html>
      <body>
       <p>
        625 charges
       </p>
      </body>
     </html>
    </figcaption>
   </figure>
  </div>
 </div>
</section><section class="bg-black slide" id="slide-number-8">
 <span class="background" style="background-image:url('https://source.unsplash.com/qDY9ahp0Mto')">
 </span>
 <div class="wrap">
  <div class="wrap content-right">
   <h3>
    <text>
     Does it always work?
    </text>
   </h3>
   <text>
    <strong>
     NO!
    </strong>
    When N gets large there are an exponentially large amount of stable configurations that aren't the minima.
   </text>
   <text>
    <br>
     <br/>
    </br>
   </text>
   <h3>
    <text>
     Does TensorFlow make it faster?
    </text>
   </h3>
   <text>
    <strong>
     YES!
    </strong>
    TensorFlow on a GPU is 10x faster than the 4-cores on a CPU (tested at N=4000)
   </text>
   <text>
    <br>
     <br/>
    </br>
   </text>
   <h3>
    <text>
     Is it useful?
    </text>
   </h3>
   <text>
    <strong>
     EH.
    </strong>
    The solution to the Thomson problem isn't exciting
    <em>
     per se
    </em>
    but new solutions often give insight into minimization problems. This is more of an example of a novel use of TensorFlow.
   </text>
  </div>
 </div>
</section><section class="bg-apple slide" id="slide-number-9">
 <h1 class="text-data">
  <text>
   Thanks, you!
  </text>
 </h1>
 <text>
  <br>
   <br/>
  </br>
 </text>
 <h2>
  <ul class="markdownlist">
   <li>
    <text>
     Thoughts? Ideas?
    </text>
   </li>
   <li>
    <text>
     <a href='href="https://twitter.com/metasemantic"'>
      @metasemantic
     </a>
    </text>
   </li>
  </ul>
 </h2>
 <text>
  <br>
   <br/>
  </br>
 </text>
 <h2>
  <ul class="markdownlist">
   <li>
    <text>
     Want to read more? Read on medium.com:
    </text>
   </li>
   <li>
    <text>
     <a href="https://medium.com/towards-data-science/stupid-tensorflow-tricks-3a837194b7a0">
      Stupid TensorFlow Tricks
     </a>
    </text>
   </li>
  </ul>
 </h2>
</section>
   </article>
  </main>
  <!-- end main -->
  <!-- jQuery (required for slides to work) -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js">
  </script>
  <!-- Custom slide control -->
  <script src="static/js/slider.js">
  </script>
  <!-- KaTeX imports -->
  <script src="static/katex/katex.min.js">
  </script>
  <!-- Render the equations -->
  <script type="text/javascript">
   // grab all elements in DOM with the class 'equation'
    var tex = document.getElementsByClassName("equation");

    // for each element, render the expression attribute
    Array.prototype.forEach.call(tex, function(el) {
        katex.render(el.getAttribute("data-expr"), el);
    });
  </script>
  <!-- End of imports -->
 </body>
</html>
